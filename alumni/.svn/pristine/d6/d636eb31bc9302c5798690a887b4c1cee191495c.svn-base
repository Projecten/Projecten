<script type="text/javascript">
    
    $(function() {
        $( "button" ).button();
    });
    
    $(function() {
        $( "#opslaan" ).button();
    });
    
    $(function() {
        $( ".datum" ).datepicker({ dateFormat: 'dd-mm-yy' });
    });
    
    $(document).ready(function(){
        $('#annuleer').click(function(){
            history.back();
        });
    });
    
    
</script>

<script type="text/javascript">

    var ok = true;

    $(function(){
        
        function validatieOK ()
        {
            //Beginparameter meegeven, deze start op true
            ok = true;
            
            
            //Veld naam controleren
            if ($( "#naam" ).val() == "") {
                $( "#naam" ).addClass( "ui-state-error" );
                ok = false;
            } else {
                $('#naam').removeClass('ui-state-error');
            }
            
            //Veld omschrijving controleren
            if ($( "#omschrijving" ).val() == "") {
                $( "#omschrijving" ).addClass( "ui-state-error" );
                ok = false;
            } else {
                $( "#omschrijving" ).removeClass( "ui-state-error" );
            }
            
            //Veld plaats controleren
            if ($('#plaats').val() == 0) {
                $('#plaats').addClass('ui-state-error');
                ok = false;
            } else {
                $( "#plaats" ).removeClass( "ui-state-error" );
            }
            
            //Veld datum controleren
            if ($('#datum').val() == "") {
                $( "#datum" ).addClass( "ui-state-error" );
                ok = false;
            } else {
                $( "#datum" ).removeClass( "ui-state-error" );
            }
            
            //Veld datuminschrijving controleren
            if ($('#datuminschrijving').val() == "") {
                $( "#datumInschrijving" ).addClass( "ui-state-error" );
                ok = false;
            } else {
                $( "#datumInschrijving" ).removeClass( "ui-state-error" );
            }
            
            //Veld startuur controleren
            if ($('#startuur').val() == "") {
                $( "#startuur" ).addClass( "ui-state-error" );
                ok = false;
            } else {
                $( "#startuur" ).removeClass( "ui-state-error" );
            }

            //Veld deadline datum controleren
            if ($('#deadlineInschrijving').val() == "") {
                $( "#deadlineInschrijving" ).addClass( "ui-state-error" );
                ok = false;
            } else {
                $( "#deadlineInschrijving" ).removeClass( "ui-state-error" );
            }
            
            return ok;
        }

        $( "#opslaan" ).click(function(e) {
            e.preventDefault();
            if (validatieOK()) {
                $( "#myform" ).submit();
            }
        });
        
    });
    
</script>

<style rel="stylesheet" type="text/css">
    textarea{
        resize: none;
    }
</style>

<?php
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
?>

<?php
$naam = array(
    'name' => 'naam',
    'id' => 'naam',
    'value' => $evenement->naam
);

$omschrijving = array(
    'name' => 'omschrijving',
    'id' => 'omschrijving',
    'value' => $evenement->omschrijving,
    'cols' => 40,
    'rows' => 5,
    'resize' => FALSE
);

$plaats = array(
    'name' => 'plaats',
    'id' => 'plaats',
    'value' => '',
);

$datum = array(
    'name' => 'datum',
    'id' => 'datum',
    'class' => 'datum',
//    'value' => ($evenement->datum == NULL) ? '' : strftime("%d-%m-%Y", strtotime($evenement->datum))
);

$startuur = array(
    'name' => 'startuur',
    'id' => 'startuur',
//    'value' => ($evenement->datum == NULL) ? '' : strftime("%Hu%M", strtotime($evenement->datum))
);

$deadlineInschrijving = array(
    'name' => 'deadlineInschrijving',
    'id' => 'deadlineInschrijving',
    'class' => 'datum',
    'value' => ($evenement->deadlineInschrijving == NULL) ? '' : strftime("%d-%m-%Y", strtotime($evenement->deadlineInschrijving))
);

echo 'datum: ' . $evenement->datum;
?>

<div>
    <?php
    $attributes = array('name' => 'myform', 'id' => 'myform');
    echo form_open('admin/update', $attributes);
    echo form_hidden('id', $evenement->id);
    ?>

    <table>
        <tr>
            <td><?php echo form_label('Naam', $naam['id']); ?></td>
            <td><?php echo form_input($naam); ?></td>
        </tr>
        <tr>
            <td><?php echo form_label('Omschrijving:', $omschrijving['id']); ?></td>
            <td colspan="3"><?php echo form_textarea($omschrijving); ?></td>
        </tr>
        <tr>
            <td><?php echo form_label('Plaats:', $plaats['id']); ?></td>
            <td colspan="3"><?php echo form_dropdown($plaats['name'], $plaatsen, 0, "id='" . $plaats['id'] . "'"); ?></td>
        </tr>
        <tr>
            <td><?php echo form_label('Datum:', 'datum'); ?></td>
            <td><?php echo form_input($datum); ?></td>

            <td><?php echo form_label('Startuur:', 'startuur'); ?></td>
            <td><?php echo form_input($startuur); ?></td>
        </tr>
        <tr>
            <td><?php echo form_label('Deadline voor inschrijvingen:', 'deadlineInschrijving'); ?></td>
            <td><?php echo form_input($deadlineInschrijving); ?></td>

            <td></td>
            <td>(bijvoorbeeld : 8u30)</td>
        </tr>
        <tr>
            <td></td>
            <td><?php echo form_submit('Opslaan', $actie, 'id="opslaan"', 'class="buttons ui-button ui-widget ui-state-default ui-corner-all"'); ?>
                <?php echo form_button('annuleer', 'Annuleren', 'id="annuleer"'); ?>
            </td>
        </tr>
    </table>

    <?php echo form_close(); ?>
</div>
