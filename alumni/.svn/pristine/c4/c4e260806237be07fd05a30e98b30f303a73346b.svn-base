<script type="text/javascript">

    $(function() {
        $(".datum").datepicker({dateFormat: 'dd/mm/yy'});
        $(".buttons").button();
        $("#zoeken").click(function(e) {
            e.preventDefault();
            zoekevenementen($("#naam").val(), $("#plaats").val(), $("#begindatum").val(), $("#einddatum").val(), $("#omschrijving").val(), $("#pagination").val());
        });
        $("#aanmaken").click(function() {
            // hier waarde voor dialog aanmaken nieuw evenement
        });
    });

    function zoekevenementen(naam, plaats, begindatum, einddatum, omschrijving, pagination) {
        $.ajax({type: "GET",
            url: site_url + "/user/evenementenZoekactie",
            data: {naam: naam,
                plaats: plaats,
                begindatum: begindatum,
                einddatum: einddatum,
                omschrijving: omschrijving,
                pagination: pagination
            },
            success: function(result) {
                $("#resultaat").html(result);
            }
        });
    }
</script>

<?php
$zoekinfoEvenementen = $this->session->userdata('zoekinfoEvenementen');

$naam = array(
    'name' => 'naam',
    'id' => 'naam',
    'value' => $zoekinfoEvenementen['naam'],
);

$submit = array(
    'id' => 'zoeken',
    'name' => 'zoeken',
    'class' => 'buttons',
);

$aanmaken = array(
    'id' => 'aanmaken',
    'name' => 'aanmaken',
    'class' => 'buttons',
);

$plaats = array(
    'id' => 'plaats',
    'name' => 'plaats',
);

$begindatum = array(
    'name' => 'begindatum',
    'id' => 'begindatum',
    'class' => 'datum',
    'value' => $zoekinfoEvenementen['datum1'],
);

$einddatum = array(
    'name' => 'einddatum',
    'id' => 'einddatum',
    'class' => 'datum',
    'value' => $zoekinfoEvenementen['datum2'],
);

$omschrijving = array(
    'name' => 'omschrijving',
    'id' => 'omschrijving',
    'value' => $zoekinfoEvenementen['omschrijving'],
);

$paginationOptions = array();
for ($i = 5; $i <= 30; $i += 5) {
    $paginationOptions[$i] = $i;
}

$pagination = array(
    'id' => 'pagination',
    'name' => 'pagination',
    'value' => !isset($zoekinfoEvenementen['pagination']) ? '10' : $zoekinfoEvenementen['pagination'],
);
?>
<?php echo form_open(); ?>
<table>
    <tr>
        <td><?php echo form_label('Naam', $naam['id']); ?></td>
        <td><?php echo form_input($naam); ?></td>
        <td><?php echo form_label('Omschrijving', $omschrijving['id']); ?></td>
        <td><?php echo form_input($omschrijving); ?></td>
        <td><?php echo form_label('Datum'); ?></td>
        <td><?php echo form_label('van', $begindatum['id']); ?></td>
        <td><?php echo form_input($begindatum); ?></td>
    </tr>
    <tr>
        <td><?php echo form_label('Plaats', $plaats['id']); ?></td>
        <td><?php echo form_dropdown($plaats['name'], $plaatsen, $zoekinfoEvenementen['plaatsId'], 'id="plaats"'); ?></td>
        <td><?php echo form_label('Rijen per pagina', $pagination['id']); ?></td>
        <td><?php echo form_dropdown($pagination['name'], $paginationOptions, $pagination['value'], 'id="pagination"'); ?></td>
        <td></td>
        <td><?php echo form_label('tot', $einddatum['id']); ?></td>
        <td><?php echo form_input($einddatum); ?></td>
    </tr>
    <tr>
        <td></td>
        <td><?php echo form_submit($submit, 'Zoeken'); ?></td>
        <?php if ($recht == 3) { ?>
            <td><?php echo form_button($aanmaken, 'Evenement aanmaken'); ?></td>
        <?php } ?>
        <td><?php echo form_hidden('geavanceerd', '1'); ?></td>
    </tr>
</table>
<?php echo form_close(); ?>